<html>
	<title>Milestone</title>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 0px 5%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="container">
		<h1>Lightning Variety Simulation Project</h1>

		Link to webpage: <a href="https://arumilla.github.io/finalprojectwebpage/milestone/index.html">https://arumilla.github.io/finalprojectwebpage/milestone/index.html</a>
		
		<br>

		Link to Slides: <a href="https://docs.google.com/presentation/d/14tYuB4O1VHmGTCLb5vw9DYbbn5CyloZO2ufeRsMVb-4/edit?usp=sharing">https://docs.google.com/presentation/d/14tYuB4O1VHmGTCLb5vw9DYbbn5CyloZO2ufeRsMVb-4/edit?usp=sharing</a>

        <br>

		Link to Video: <a href="https://drive.google.com/file/d/1LyKl3Y6bnOCvt6EJFjdjZT5RbI_mjOGo/view?usp=sharing">https://drive.google.com/file/d/1LyKl3Y6bnOCvt6EJFjdjZT5RbI_mjOGo/view?usp=sharing</a>

        <br>

		<h2>Accomplishments</h2>
		&emsp; After research, we realized that real-life lightning is still poorly understood and newer research points to metastable oxygen accumulation rather than DBM. Thus, because this is a computer graphics, we adjusted the scope of our project to focus on fast approximations and real-time rendering by building off of homework 4.		<h3>Lightning Path Simulation</h3>
		<p> 
			&emsp; One path algorithm we implemented is based off a fast approximation to DBM. This algorithm calculates the approximate probability distribution of potentials and chooses the next candidate cell based on it. To optimize, we vectorized the probability computation and added parameters(\(n\) and \(p\)) to limit the number of cells by controlling branching. Next steps include lifting the algorithm from 2D to 3D and performing additional optimizations.

			<div style="display: flex; flex-direction: column; align-items: center;">
				<table style="text-align: center; border-collapse: collapse;">
					<tr>
					<td style="text-align: center;">
						<img src="./images/1_1.png" width="70px"/>
						<figcaption>n = 1, p = 1</figcaption>
					</td>
					<td style="text-align: center;">
						<img src="./images/1_3.png" width="70px"/>
						<figcaption>n = 1, p = 3</figcaption>
					</td>
					<td style="text-align: center;">
						<img src="./images/3_1.png" width="70px"/>
						<figcaption>n = 3, p = 1</figcaption>
					</td>
					<td style="text-align: center;">
						<img src="./images/3_3.png" width="70px"/>
						<figcaption>n = 3, p = 3</figcaption>
					</td>
					</tr>
				</table>
			</div>

			
			&emsp;Another path algorithm we implemented is space colonization (used for generating foliage and trees). While the algorithm is not grounded in physics, it can be a better approximation because it is significantly faster, and it operates more similarly to metastable accumulation in newer research. Furthermore, we improved the algorithm by vectorizing it and made the stepping of the main leader and branches synchronous in anticipation of time-based simulation. Next steps include coming up with more realistic branching heuristics, and incorporating dynamic time steps.
			<br><br>

			<div style="display: flex; flex-direction: column; align-items: center;">
				<table style="text-align: center; border-collapse: collapse;">
					<tr>
						<td style="text-align: center;">
							<img src="./images/sc.png" width="150px"/>
							<figcaption>A 3D rendered lightning bolt via space colonization.</figcaption>
						</td>
						<td style="text-align: center;">
							<img src="./images/sc_vol.png" width="150px"/>
							<figcaption>The volume and attractor points used for the main path.</figcaption>
						</td>
						<td colspan="2" style="text-align: center;">
							<img src="./images/sc_branches.png" width="150px"/>
							<figcaption>Branch volumes and endpoints.</figcaption>
						</td>
					</tr>
				</table>
			</div>
			
        </p>
		
		<h3>Simulation platform</h3>
		<p>
			&emsp;In order to use the paths generated, we added the ability to load in 3D coordinates from a CSV file and create a mesh of cylinders from it with keyboard controls to step through the path. The next step will be creating the scene for the lightning and adding the ability to adjust starting locations for interactivity.
			<br>
			&emsp;For rendering the lightning, we will use shaders to add a bloom post-processing effect following OpenGLâ€™s guide. The additional shaders needed for this are completed but we will need to modify the rendering pipeline support post-processing using frame buffers.
			<div style="display: flex; flex-direction: column; align-items: center;">
				<table style="width: 100%; text-align: center; border-collapse: collapse;">
					<tr>
					<td style="text-align: center;">
						<img src="./images/highpass.png" width="150px"/>
						<figcaption>A picture rendered with a high-pass shader</figcaption>
					</td>
					<td style="text-align: center;">
						<img src="./images/gaussblur.png" width="160px"/>
						<figcaption>A picture rentered with a Gaussian blur shader</figcaption>
					</td>
					</tr>
				</table>
			</div>
		</p>
		<h2>Schedule</h2>

        &emsp; Due to large modifications to the project, our initial roadmap is no longer valid. For the next two weeks, we plan on adding the extensions metioned earlier while also working on integration in the last week.

    </body>
</html>